<Page
    x:Class="KinopoiskUWP.Views.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:KinopoiskUWP.Converters"
    mc:Ignorable="d"
    Background="#1f1f1f">

    <Page.Resources>
        <converters:IntToVisibilityConverter x:Key="IntToVisibilityConverter"/>
        <!-- Конвертер для форматирования строки -->
        <converters:StringFormatConverter x:Key="StringFormatConverter"/>
    </Page.Resources>

    <Grid>
        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
            <!-- Исправленная строка с использованием конвертера -->
            <TextBlock 
                Text="{Binding Films.Count, 
                             Converter={StaticResource StringFormatConverter},
                             ConverterParameter='Всего фильмов: {0}'}"
                Foreground="White" Margin="0,0,0,20"/>

            <Border Background="#2a2a2a" Padding="20" CornerRadius="8"
                   Visibility="{Binding Films.Count, Converter={StaticResource IntToVisibilityConverter}}">
                <StackPanel>
                    <TextBlock x:Name="DebugFilmName"
                             Text="{Binding Films[0].NameRu, FallbackValue='Тестовое название'}"
                             FontSize="24" Foreground="White"/>

                    <TextBlock Text="{Binding Films[0].Year, FallbackValue='2023'}"
                             FontSize="16" Foreground="Gray" Margin="0,10,0,0"/>

                    <Image Width="200" Height="300" Margin="0,20,0,0">
                        <Image.Source>
                            <Binding Path="Films[0].PosterUrlPreview">
                                <Binding.FallbackValue>
                                    <BitmapImage UriSource="ms-appx:///Assets/StoreLogo.png"/>
                                </Binding.FallbackValue>
                            </Binding>
                        </Image.Source>
                    </Image>
                </StackPanel>
            </Border>
        </StackPanel>

        <ProgressRing IsActive="{Binding IsLoading}" 
                     Width="50" Height="50"
                     Foreground="#3B7DD8"
                     HorizontalAlignment="Center"
                     VerticalAlignment="Center"/>
    </Grid>
</Page>